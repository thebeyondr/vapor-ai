---
phase: 02-dashboard-and-welcome
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - hooks/use-local-storage.ts
  - app/(dashboard)/components/welcome-modal.tsx
  - app/(dashboard)/page.tsx
autonomous: true

must_haves:
  truths:
    - "First-time visitor sees welcome modal explaining Vapor's purpose and suggested actions"
    - "User can dismiss welcome modal and it stays dismissed on page reload"
    - "User can reopen the welcome modal from a floating button"
  artifacts:
    - path: "hooks/use-local-storage.ts"
      provides: "SSR-safe localStorage hook with JSON serialization"
      exports: ["useLocalStorage"]
    - path: "app/(dashboard)/components/welcome-modal.tsx"
      provides: "Welcome modal with FAB reopen button"
      contains: "useLocalStorage"
  key_links:
    - from: "app/(dashboard)/components/welcome-modal.tsx"
      to: "hooks/use-local-storage.ts"
      via: "useLocalStorage hook import"
      pattern: "useLocalStorage.*vapor-welcome"
    - from: "app/(dashboard)/page.tsx"
      to: "app/(dashboard)/components/welcome-modal.tsx"
      via: "WelcomeModal component composition"
      pattern: "WelcomeModal"
---

<objective>
Build the first-time visitor welcome modal with localStorage-persisted dismissal and a floating action button to reopen it.

Purpose: First-time visitors (hiring team) immediately understand what Vapor is, why it was built, and what to try. Dismissal persists so return visits aren't interrupted. The FAB provides a non-intrusive way to revisit the introduction.
Output: Welcome modal component with localStorage persistence, floating reopen button, composed into dashboard page.
</objective>

<execution_context>
@/home/wraith/.claude/get-shit-done/workflows/execute-plan.md
@/home/wraith/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-dashboard-and-welcome/02-RESEARCH.md
@.planning/phases/02-dashboard-and-welcome/02-01-SUMMARY.md
@app/(dashboard)/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useLocalStorage hook and install Dialog component</name>
  <files>
    hooks/use-local-storage.ts
  </files>
  <action>
    1. Install ShadCN Dialog: `pnpm dlx shadcn@latest add dialog`

    2. Create `hooks/use-local-storage.ts` — Client-side hook:
       - Add 'use client' directive
       - Export `useLocalStorage<T>(key: string, initialValue: T): [T, (value: T | ((prev: T) => T)) => void]`
       - Initialize state with lazy initializer: check `typeof window !== 'undefined'` then try localStorage.getItem, parse JSON, fallback to initialValue
       - setValue: accepts value or updater function (like useState), writes to localStorage via JSON.stringify, dispatches custom 'local-storage' event for cross-component sync
       - useEffect listener for 'storage' and 'local-storage' events to sync across tabs/components
       - Wrap all localStorage access in try/catch with console.warn fallback
       - Follow research pattern exactly (Pattern 5 in RESEARCH.md)
  </action>
  <verify>
    - `pnpm build` succeeds (hook compiles, Dialog component installed)
    - Dialog component exists at components/ui/dialog.tsx
  </verify>
  <done>useLocalStorage hook is SSR-safe, handles JSON serialization, syncs across tabs, and Dialog component is installed</done>
</task>

<task type="auto">
  <name>Task 2: Build welcome modal with FAB and compose into dashboard</name>
  <files>
    app/(dashboard)/components/welcome-modal.tsx
    app/(dashboard)/page.tsx
  </files>
  <action>
    1. Create `app/(dashboard)/components/welcome-modal.tsx` — Client Component:
       - Add 'use client' directive
       - Import Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription from ShadCN
       - Import Button from ShadCN, useLocalStorage hook, useState
       - Import HelpCircle, Rocket, Sparkles from lucide-react

       - Use `useLocalStorage('vapor-welcome-seen', false)` for persistence
       - Initialize isOpen state: `useState(!hasSeenWelcome)`
       - handleDismiss: set hasSeenWelcome to true, set isOpen to false

       - Modal content (targeted at Liquid AI hiring team):
         - Title: "Welcome to Vapor"
         - Description: "A portfolio demonstration of Liquid AI's LFM platform capabilities"
         - Body (3-4 concise bullets):
           - "Explore Liquid Foundation Models across text, vision, audio, and nano variants"
           - "Configure and launch simulated training runs with real-time progress"
           - "Monitor training metrics with realistic loss curves and status tracking"
           - "View deployed model performance and inference statistics"
         - Two buttons:
           - "Got it" (outline variant) — calls handleDismiss
           - "Start Training" (default variant, with Rocket icon) — calls handleDismiss, then navigates to /training (use Next.js useRouter)

       - Floating Action Button (rendered alongside Dialog, not inside):
         - Only visible when `hasSeenWelcome === true` AND `isOpen === false`
         - Fixed position: `fixed bottom-6 right-6`
         - Round button (size="icon", rounded-full, shadow-lg)
         - HelpCircle icon
         - Wrap in TooltipProvider > Tooltip > TooltipTrigger with "Show welcome message" tooltip on left side
         - onClick: set isOpen to true

    2. Update `app/(dashboard)/page.tsx`:
       - Import WelcomeModal component
       - Add `<WelcomeModal />` at the end of the page JSX (after RecentJobsList)
       - WelcomeModal is a Client Component island — no changes to the Server Component data flow

    3. Verify build and behavior: `pnpm build`
  </action>
  <verify>
    - `pnpm build` succeeds
    - Visit http://localhost:3000 — welcome modal appears on first visit
    - Dismiss modal — it stays dismissed on page reload
    - Floating button appears in bottom-right corner after dismissal
    - Click floating button — modal reopens
    - Clear localStorage — modal appears again on next visit
  </verify>
  <done>Welcome modal shows on first visit with Vapor intro and CTAs, persists dismissal in localStorage, and can be reopened via floating help button in bottom-right corner</done>
</task>

</tasks>

<verification>
1. `pnpm build` succeeds with no TypeScript errors
2. First visit shows welcome modal with project description and CTAs
3. Dismissing modal persists via localStorage — reload does not re-show
4. Floating help button appears after dismissal
5. Clicking help button reopens the welcome modal
6. "Start Training" button navigates to /training
</verification>

<success_criteria>
- Welcome modal appears for first-time visitors with clear explanation of Vapor
- Modal is dismissible and stays dismissed across page loads (localStorage)
- Floating action button in bottom-right allows reopening the modal
- All components use ShadCN Dialog primitives for accessibility (focus trap, ESC key, overlay dismiss)
- Client Component boundary is minimal — only welcome-modal.tsx is 'use client'
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-and-welcome/02-02-SUMMARY.md`
</output>
