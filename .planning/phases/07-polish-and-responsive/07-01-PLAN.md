---
phase: 07-polish-and-responsive
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/spinner.tsx
  - app/(dashboard)/loading.tsx
  - app/(dashboard)/training/loading.tsx
  - app/(dashboard)/training/jobs/loading.tsx
  - app/(dashboard)/training/configure/loading.tsx
  - app/(dashboard)/deployments/loading.tsx
  - app/(dashboard)/components/skeletons/dashboard-skeleton.tsx
  - app/(dashboard)/components/skeletons/table-skeleton.tsx
  - app/(dashboard)/components/skeletons/card-list-skeleton.tsx
  - app/(dashboard)/components/skeletons/model-catalog-skeleton.tsx
  - app/(dashboard)/components/empty-state.tsx
  - app/(dashboard)/components/recent-jobs-list.tsx
  - app/(dashboard)/deployments/page.tsx
  - app/(dashboard)/training/jobs/page.tsx
  - app/(dashboard)/training/configure/page.tsx
  - lib/constants/ml-metrics.ts
autonomous: true

must_haves:
  truths:
    - "All route transitions show skeleton loading states that match final content structure"
    - "Empty lists/tables show contextual messaging with icons and actionable CTAs"
    - "Action buttons show spinner feedback when performing async operations"
    - "ML metric constants exist with domain-appropriate ranges"
  artifacts:
    - path: "components/ui/spinner.tsx"
      provides: "Reusable spinner component for action loading"
      contains: "animate-spin"
    - path: "app/(dashboard)/loading.tsx"
      provides: "Dashboard route loading skeleton"
      contains: "Skeleton"
    - path: "app/(dashboard)/training/loading.tsx"
      provides: "Training route loading skeleton"
      contains: "Skeleton"
    - path: "app/(dashboard)/deployments/loading.tsx"
      provides: "Deployments route loading skeleton"
      contains: "Skeleton"
    - path: "app/(dashboard)/components/empty-state.tsx"
      provides: "Reusable empty state component with icon, title, description, CTA"
      exports: ["EmptyState"]
    - path: "lib/constants/ml-metrics.ts"
      provides: "ML metric range constants"
      exports: ["ML_METRIC_RANGES"]
  key_links:
    - from: "app/(dashboard)/loading.tsx"
      to: "app/(dashboard)/components/skeletons/dashboard-skeleton.tsx"
      via: "import"
      pattern: "DashboardSkeleton"
    - from: "app/(dashboard)/deployments/page.tsx"
      to: "app/(dashboard)/components/empty-state.tsx"
      via: "import"
      pattern: "EmptyState"
---

<objective>
Add loading states, empty states, and ML metric constants across all routes.

Purpose: Eliminate blank screens during navigation and provide helpful guidance when data is empty -- the two most impactful UX improvements for perceived polish.
Output: loading.tsx files for every route, reusable skeleton components, reusable EmptyState component, upgraded empty states on all data pages, ML_METRIC_RANGES constants, spinner component.
</objective>

<execution_context>
@/home/wraith/.claude/get-shit-done/workflows/execute-plan.md
@/home/wraith/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-polish-and-responsive/07-RESEARCH.md
@app/(dashboard)/page.tsx
@app/(dashboard)/layout.tsx
@app/(dashboard)/components/dashboard-metrics.tsx
@app/(dashboard)/components/recent-jobs-list.tsx
@app/(dashboard)/training/page.tsx
@app/(dashboard)/training/jobs/page.tsx
@app/(dashboard)/training/configure/page.tsx
@app/(dashboard)/deployments/page.tsx
@components/ui/skeleton.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skeleton loading components and loading.tsx files for all routes</name>
  <files>
    components/ui/spinner.tsx
    app/(dashboard)/components/skeletons/dashboard-skeleton.tsx
    app/(dashboard)/components/skeletons/table-skeleton.tsx
    app/(dashboard)/components/skeletons/card-list-skeleton.tsx
    app/(dashboard)/components/skeletons/model-catalog-skeleton.tsx
    app/(dashboard)/loading.tsx
    app/(dashboard)/training/loading.tsx
    app/(dashboard)/training/jobs/loading.tsx
    app/(dashboard)/training/configure/loading.tsx
    app/(dashboard)/deployments/loading.tsx
  </files>
  <action>
    1. Create `components/ui/spinner.tsx` -- a simple spinner component using lucide-react's Loader2 icon with `animate-spin` class. Accept className prop for sizing. Export `Spinner`.

    2. Create reusable skeleton components in `app/(dashboard)/components/skeletons/`:

    - `dashboard-skeleton.tsx`: Matches dashboard page layout -- page header skeleton (h1 + description line), 4 metric cards in a `grid gap-4 md:grid-cols-2 lg:grid-cols-4` grid (each card: small title skeleton + large number skeleton + description skeleton), then a recent jobs card with 5 row skeletons (each row: name line + model name line + status badge + time).

    - `table-skeleton.tsx`: Matches deployments table -- header row with 4 column skeletons, then 5-8 body rows each with 4 cell skeletons of varying widths. Accept `rows` prop (default 5) and `columns` prop (default 4).

    - `card-list-skeleton.tsx`: Matches training jobs page -- page header skeleton, then 3-4 card skeletons each with title + description header and a 3-column grid of param skeletons. Accept `count` prop (default 3).

    - `model-catalog-skeleton.tsx`: Matches training/model discovery page -- page header skeleton, then a hero card skeleton (recommender), separator, section header + grid of 4 model card skeletons (2x2 on desktop), separator, another section header + search input skeleton.

    CRITICAL: Skeleton dimensions MUST match actual rendered content to prevent layout shift. Use the same Card/CardHeader/CardContent wrappers from ShadCN. Use the same grid classes as the real components.

    3. Create `loading.tsx` files for each route group:

    - `app/(dashboard)/loading.tsx`: exports default function returning `<DashboardSkeleton />`
    - `app/(dashboard)/training/loading.tsx`: exports default function returning `<ModelCatalogSkeleton />`
    - `app/(dashboard)/training/jobs/loading.tsx`: exports default function returning `<CardListSkeleton />`
    - `app/(dashboard)/training/configure/loading.tsx`: exports default function returning a simple form skeleton (title + description + 4 form field skeletons in a card)
    - `app/(dashboard)/deployments/loading.tsx`: exports default function returning `<TableSkeleton />`

    Each loading.tsx wraps content in the same outer `<div className="space-y-6">` or `space-y-8` as its page.tsx to prevent layout shift.
  </action>
  <verify>Run `pnpm build` -- all loading.tsx files compile without errors. Visually inspect that skeleton imports resolve.</verify>
  <done>Every dashboard route has a loading.tsx that shows structured skeletons matching final content layout. Spinner component available for action buttons.</done>
</task>

<task type="auto">
  <name>Task 2: Create reusable EmptyState, upgrade all empty states, and add ML metric constants</name>
  <files>
    app/(dashboard)/components/empty-state.tsx
    app/(dashboard)/components/recent-jobs-list.tsx
    app/(dashboard)/deployments/page.tsx
    app/(dashboard)/training/jobs/page.tsx
    lib/constants/ml-metrics.ts
  </files>
  <action>
    1. Create `app/(dashboard)/components/empty-state.tsx`:
    - Reusable component accepting: `icon` (lucide-react component type), `title` (string), `description` (string), `actionLabel` (string), `actionHref` (string).
    - Render: Card with centered content (py-16), icon at h-12 w-12 in text-muted-foreground, title as text-lg font-semibold, description as text-sm text-muted-foreground max-w-md, and a Button with the action label linking to actionHref.
    - Export named `EmptyState`.

    2. Update `app/(dashboard)/components/recent-jobs-list.tsx`:
    - Replace the existing empty state div with `<EmptyState icon={FolderOpen} title="No training jobs yet" description="Start your first training job to fine-tune a model on your data." actionLabel="Start Training" actionHref="/training" />`.
    - Import FolderOpen from lucide-react and EmptyState.

    3. Update `app/(dashboard)/deployments/page.tsx`:
    - Replace the existing Card-based empty state with `<EmptyState icon={Rocket} title="No deployments yet" description="Deploy a completed training job to start serving inference requests." actionLabel="View Training Jobs" actionHref="/training/jobs" />`.
    - Import Rocket from lucide-react and EmptyState.

    4. Update `app/(dashboard)/training/jobs/page.tsx`:
    - Replace the existing Card-based empty state with `<EmptyState icon={BrainCircuit} title="No training jobs yet" description="Create your first training job to fine-tune models on your data." actionLabel="New Training Job" actionHref="/training/configure" />`.
    - Import BrainCircuit from lucide-react and EmptyState.

    5. Create `lib/constants/ml-metrics.ts`:
    - Export `ML_METRIC_RANGES` constant object with realistic ranges:
      - `loss`: { initial: { min: 2.0, max: 5.0 }, converged: { min: 0.1, max: 1.0 } }
      - `gpuUtilization`: { low: { min: 25, max: 40 }, good: { min: 40, max: 60 }, excellent: { min: 60, max: 85 } }
      - `learningRate`: { small: 0.0001, typical: 0.001, large: 0.01 }
      - `accuracy`: { initial: { min: 0.4, max: 0.6 }, trained: { min: 0.75, max: 0.95 } }
      - `latency`: { p50: { min: 15, max: 45 }, p95Factor: 2.5, p99Factor: 4.0 }
      - `errorRate`: { healthy: { min: 0.001, max: 0.01 }, degraded: { min: 0.01, max: 0.05 } }
    - These constants are reference values for Phase 7 verification and future chart normalization. Existing simulators (training-simulator, inference-simulator) already produce realistic values, so do NOT refactor them -- just provide the constants as a documented source of truth.
  </action>
  <verify>Run `pnpm build` -- all modified files compile. Grep for "No data" or generic empty messages to confirm they've been replaced with contextual ones.</verify>
  <done>All empty states use consistent EmptyState component with domain-specific icons, titles, descriptions, and CTAs. ML_METRIC_RANGES constants file exists as domain reference.</done>
</task>

</tasks>

<verification>
- `pnpm build` succeeds with zero errors
- Every page route under `app/(dashboard)/` has a sibling `loading.tsx`
- Empty states use EmptyState component with icons and CTAs (not generic "No data" messages)
- `lib/constants/ml-metrics.ts` exports ML_METRIC_RANGES with realistic ranges
- Spinner component exists at `components/ui/spinner.tsx`
</verification>

<success_criteria>
- All 5 route groups have loading.tsx with structured skeletons
- Skeleton layouts match final rendered content (same grid, same card structure)
- Empty states on dashboard, training jobs, and deployments pages use reusable EmptyState with contextual messaging
- ML metric constants documented with domain-appropriate ranges
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish-and-responsive/07-01-SUMMARY.md`
</output>
